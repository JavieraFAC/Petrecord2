"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8112],{8112:(B,p,c)=>{c.r(p),c.d(p,{TutoresPageModule:()=>W});var d=c(177),l=c(4341),a=c(4742),g=c(9384),f=c(467),o=c(4438),_=c(4379),v=c(6893),T=c(9198);function F(e,i){1&e&&(o.j41(0,"div"),o.EFF(1,"Debes ingresar t\xfa nombre"),o.k0s())}function b(e,i){1&e&&(o.j41(0,"div"),o.EFF(1,"Ingresa un nombre v\xe1lido"),o.k0s())}function N(e,i){if(1&e&&(o.j41(0,"div",12),o.DNE(1,F,2,0,"div",10)(2,b,2,0,"div",10),o.k0s()),2&e){const t=o.XpG();o.R7$(),o.Y8G("ngIf",null==t.form.controls.nombre.errors?null:t.form.controls.nombre.errors.required),o.R7$(),o.Y8G("ngIf",null==t.form.controls.nombre.errors?null:t.form.controls.nombre.errors.minlength)}}function E(e,i){1&e&&(o.j41(0,"div"),o.EFF(1,"Debes ingresar el apellido"),o.k0s())}function k(e,i){1&e&&(o.j41(0,"div"),o.EFF(1,"Ingresa un apellido v\xe1lido"),o.k0s())}function j(e,i){if(1&e&&(o.j41(0,"div",12),o.DNE(1,E,2,0,"div",10)(2,k,2,0,"div",10),o.k0s()),2&e){const t=o.XpG();o.R7$(),o.Y8G("ngIf",null==t.form.controls.apellido.errors?null:t.form.controls.apellido.errors.required),o.R7$(),o.Y8G("ngIf",null==t.form.controls.apellido.errors?null:t.form.controls.apellido.errors.minlength)}}function C(e,i){1&e&&(o.j41(0,"div"),o.EFF(1,"Debes ingresar direcci\xf3n"),o.k0s())}function M(e,i){1&e&&(o.j41(0,"div"),o.EFF(1,"Ingresa una direcci\xf3n v\xe1lida"),o.k0s())}function R(e,i){if(1&e&&(o.j41(0,"div",12),o.DNE(1,C,2,0,"div",10)(2,M,2,0,"div",10),o.k0s()),2&e){const t=o.XpG();o.R7$(),o.Y8G("ngIf",null==t.form.controls.direccion.errors?null:t.form.controls.direccion.errors.required),o.R7$(),o.Y8G("ngIf",null==t.form.controls.direccion.errors?null:t.form.controls.direccion.errors.email)}}function $(e,i){1&e&&(o.j41(0,"div"),o.EFF(1,"El tel\xe9fono es requerido."),o.k0s())}function G(e,i){1&e&&(o.j41(0,"div"),o.EFF(1,"El tel\xe9fono debe tener 8 n\xfameros"),o.k0s())}function I(e,i){if(1&e&&(o.j41(0,"div",12),o.DNE(1,$,2,0,"div",10)(2,G,2,0,"div",10),o.k0s()),2&e){const t=o.XpG();o.R7$(),o.Y8G("ngIf",null==t.form.controls.telefono.errors?null:t.form.controls.telefono.errors.required),o.R7$(),o.Y8G("ngIf",null==t.form.controls.telefono.errors?null:t.form.controls.telefono.errors.min)}}function w(e,i){1&e&&(o.j41(0,"div"),o.EFF(1,"Debes ingresar correo electr\xf3nico"),o.k0s())}function Y(e,i){1&e&&(o.j41(0,"div"),o.EFF(1,"Ingresa un correo v\xe1lido"),o.k0s())}function y(e,i){if(1&e&&(o.j41(0,"div",12),o.DNE(1,w,2,0,"div",10)(2,Y,2,0,"div",10),o.k0s()),2&e){const t=o.XpG();o.R7$(),o.Y8G("ngIf",null==t.form.controls.email.errors?null:t.form.controls.email.errors.required),o.R7$(),o.Y8G("ngIf",null==t.form.controls.email.errors?null:t.form.controls.email.errors.email)}}function D(e,i){if(1&e){const t=o.RV6();o.j41(0,"div",14)(1,"ion-item")(2,"ion-label",15),o.EFF(3,"Nombre de la mascota"),o.k0s(),o.j41(4,"ion-input",16),o.mxI("ngModelChange",function(n){const s=o.eBV(t).$implicit;return o.DH7(s.nombre,n)||(s.nombre=n),o.Njj(n)}),o.k0s()(),o.j41(5,"ion-item")(6,"ion-label",15),o.EFF(7,"Especie"),o.k0s(),o.j41(8,"ion-input",17),o.mxI("ngModelChange",function(n){const s=o.eBV(t).$implicit;return o.DH7(s.especie,n)||(s.especie=n),o.Njj(n)}),o.k0s()(),o.j41(9,"ion-item")(10,"ion-label",15),o.EFF(11,"Fecha de Nacimiento"),o.k0s(),o.j41(12,"ion-datetime",18),o.mxI("ngModelChange",function(n){const s=o.eBV(t).$implicit;return o.DH7(s.fechaNacimiento,n)||(s.fechaNacimiento=n),o.Njj(n)}),o.k0s()(),o.j41(13,"ion-button",19),o.bIt("click",function(){const n=o.eBV(t).index,s=o.XpG(2);return o.Njj(s.eliminarMascota(n))}),o.EFF(14,"Eliminar Mascota"),o.k0s()()}if(2&e){const t=i.$implicit;o.R7$(4),o.R50("ngModel",t.nombre),o.R7$(4),o.R50("ngModel",t.especie),o.R7$(4),o.R50("ngModel",t.fechaNacimiento)}}function S(e,i){if(1&e&&(o.j41(0,"div")(1,"h2"),o.EFF(2,"Mascotas"),o.k0s(),o.DNE(3,D,15,3,"div",13),o.k0s()),2&e){const t=o.XpG();o.R7$(3),o.Y8G("ngForOf",t.mascotas)}}let h=(()=>{var e;class i{constructor(){this.form=new l.gE({id:new l.MJ(""),nombre:new l.MJ("",[l.k0.required,l.k0.minLength(3)]),apellido:new l.MJ("",[l.k0.required,l.k0.minLength(3)]),direccion:new l.MJ("",[l.k0.required]),telefono:new l.MJ("",[l.k0.required,l.k0.minLength(8)]),email:new l.MJ("")}),this.firebaseS=(0,o.WQX)(v.f),this.cargandoS=(0,o.WQX)(_.X),this.user={},this.mascotas=[]}ngOnInit(){this.user=this.cargandoS.getFromLocalStorage("user"),this.tutor&&(this.form.patchValue(this.tutor),this.mascotas=this.tutor.mascotas||[])}submit(){var r=this;return(0,f.A)(function*(){if(r.form.valid){const n=`users/${r.user.uid}/tutores`,s={...r.form.value,mascotas:r.mascotas},u=yield r.cargandoS.loading();yield u.present();try{r.tutor?(yield r.firebaseS.editarTutor(n,s.id,s),r.cargandoS.dismissmodal({success:!0,tutor:s}),r.cargandoS.presentToast({message:"Tutor actualizado exitosamente",duration:1500,color:"success",position:"middle"})):(delete s.id,yield r.firebaseS.agregarTutor(n,s),r.cargandoS.dismissmodal({success:!0,tutor:s}),r.cargandoS.presentToast({message:"Nuevo tutor agregado",duration:1500,color:"success",position:"middle"})),yield u.dismiss()}catch(m){yield u.dismiss(),console.error(m),r.cargandoS.presentToast({message:"Error",duration:1500,color:"danger",position:"middle"})}}})()}agregarMascota(){this.mascotas.push({nombre:"",especie:"",fechaNacimiento:""})}eliminarMascota(r){this.mascotas.splice(r,1)}}return(e=i).\u0275fac=function(r){return new(r||e)},e.\u0275cmp=o.VBU({type:e,selectors:[["app-newtutor"]],inputs:{tutor:"tutor"},decls:20,vars:12,consts:[[1,"modal-content"],[1,"form-container"],[3,"ngSubmit","keypress.enter","formGroup"],["autocomplete","nombre","type","text","label","Nombre",3,"control"],["class","validators",4,"ngIf"],["autocomplete","apellido","type","text","label","Apellido",3,"control"],["autocomplete","direccion","type","text","label","Ingrese direcci\xf3n",3,"control"],["autocomplete","tel","type","number","label","Tel\xe9fono",3,"control"],["autocomplete","email","type","email","label","Correo electr\xf3nico",3,"control"],["type","submit","expand","block","shape","round",2,"padding","20px"],[4,"ngIf"],[3,"click"],[1,"validators"],["class","mascota-form",4,"ngFor","ngForOf"],[1,"mascota-form"],["position","floating"],["placeholder","Nombre",3,"ngModelChange","ngModel"],["placeholder","Especie",3,"ngModelChange","ngModel"],["display-format","DD/MM/YYYY","placeholder","Selecciona la fecha",3,"ngModelChange","ngModel"],["color","danger",3,"click"]],template:function(r,n){1&r&&(o.j41(0,"ion-content",0)(1,"div",1)(2,"form",2),o.bIt("ngSubmit",function(){return n.submit()})("keypress.enter",function(){return n.submit()}),o.j41(3,"h2"),o.EFF(4,"Tutor"),o.k0s(),o.nrm(5,"app-formulario",3),o.DNE(6,N,3,2,"div",4),o.nrm(7,"app-formulario",5),o.DNE(8,j,3,2,"div",4),o.nrm(9,"app-formulario",6),o.DNE(10,R,3,2,"div",4),o.nrm(11,"app-formulario",7),o.DNE(12,I,3,2,"div",4),o.nrm(13,"app-formulario",8),o.DNE(14,y,3,2,"div",4),o.j41(15,"ion-button",9),o.EFF(16," Guardar tutor "),o.k0s()()(),o.DNE(17,S,4,1,"div",10),o.j41(18,"ion-button",11),o.bIt("click",function(){return n.agregarMascota()}),o.EFF(19,"Agregar Mascota"),o.k0s()()),2&r&&(o.R7$(2),o.Y8G("formGroup",n.form),o.R7$(3),o.Y8G("control",n.form.controls.nombre),o.R7$(),o.Y8G("ngIf",n.form.controls.nombre.errors&&n.form.controls.nombre.touched),o.R7$(),o.Y8G("control",n.form.controls.apellido),o.R7$(),o.Y8G("ngIf",n.form.controls.apellido.errors&&n.form.controls.apellido.touched),o.R7$(),o.Y8G("control",n.form.controls.direccion),o.R7$(),o.Y8G("ngIf",n.form.controls.direccion.errors&&n.form.controls.direccion.touched),o.R7$(),o.Y8G("control",n.form.controls.telefono),o.R7$(),o.Y8G("ngIf",n.form.controls.telefono.errors&&n.form.controls.telefono.touched),o.R7$(),o.Y8G("control",n.form.controls.email),o.R7$(),o.Y8G("ngIf",n.form.controls.email.errors&&n.form.controls.email.touched),o.R7$(3),o.Y8G("ngIf",n.mascotas.length>0))},dependencies:[d.Sq,d.bT,a.Jm,a.W9,a.A9,a.$w,a.uz,a.he,a.Je,a.Gw,l.qT,l.BC,l.cb,l.j4,l.vS,T.c],styles:[".modal-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:90%;padding:16px;box-shadow:0 4px 12px #0003;overflow:hidden}"]}),i})();var P=c(7988);function x(e,i){if(1&e&&(o.j41(0,"li"),o.EFF(1),o.k0s()),2&e){const t=i.$implicit;o.R7$(),o.Lme(" ",t.nombre," - ",t.especie," ")}}function X(e,i){if(1&e&&(o.j41(0,"div")(1,"h4"),o.EFF(2,"Mascotas:"),o.k0s(),o.j41(3,"ul"),o.DNE(4,x,2,2,"li",6),o.k0s()()),2&e){const t=o.XpG().$implicit;o.R7$(4),o.Y8G("ngForOf",t.mascotas)}}function V(e,i){if(1&e){const t=o.RV6();o.j41(0,"ion-item-sliding")(1,"ion-item")(2,"ion-label")(3,"h3"),o.EFF(4),o.k0s(),o.j41(5,"p"),o.EFF(6),o.k0s(),o.j41(7,"p"),o.EFF(8),o.k0s(),o.j41(9,"p"),o.EFF(10),o.k0s(),o.DNE(11,X,5,1,"div",7),o.k0s(),o.j41(12,"ion-buttons",8)(13,"ion-button",3),o.bIt("click",function(){const n=o.eBV(t).$implicit,s=o.XpG();return o.Njj(s.editarTutor(n))}),o.nrm(14,"ion-icon",9),o.k0s()()()()}if(2&e){const t=i.$implicit;o.R7$(4),o.Lme("",t.nombre," ",t.apellido,""),o.R7$(2),o.SpI("Tel\xe9fono: ",t.telefono,""),o.R7$(2),o.SpI("Direcci\xf3n: ",t.direccion,""),o.R7$(2),o.SpI("Correo: ",t.email,""),o.R7$(),o.Y8G("ngIf",null==t.mascotas?null:t.mascotas.length)}}const A=[{path:"",component:(()=>{var e;class i{constructor(){this.firebaseS=(0,o.WQX)(v.f),this.cargandoS=(0,o.WQX)(_.X),this.tutores=[]}ngOnInit(){}user(){return this.cargandoS.getFromLocalStorage("user")}ionViewWillEnter(){this.cargarTutores()}cargarTutores(){let r=`users/${this.user().uid}/tutores`;this.firebaseS.mostrarTutores(r).subscribe({next:n=>{this.tutores=n},error:n=>{console.error("Error al cargar tutores: ",n)}})}agregartutor(){var r=this;return(0,f.A)(function*(){(yield r.cargandoS.presentModal({component:h,cssClass:"modaltutor"})).onDidDismiss().then(s=>{var u;null!==(u=s.data)&&void 0!==u&&u.success&&r.cargarTutores()})})()}editarTutor(r){var n=this;return(0,f.A)(function*(){(yield n.cargandoS.presentModal({component:h,componentProps:{tutor:r},cssClass:"modaltutor"})).onDidDismiss().then(u=>{var m;null!==(m=u.data)&&void 0!==m&&m.success&&n.cargarTutores()})})()}}return(e=i).\u0275fac=function(r){return new(r||e)},e.\u0275cmp=o.VBU({type:e,selectors:[["app-tutores"]],decls:12,vars:1,consts:[["title","TUTORES"],[1,"fondo"],["vertical","bottom","horizontal","end","slot","fixed"],[3,"click"],["name","add"],[1,"ion-card"],[4,"ngFor","ngForOf"],[4,"ngIf"],["slot","end"],["name","create-outline"]],template:function(r,n){1&r&&(o.nrm(0,"app-header",0),o.j41(1,"ion-content",1)(2,"ion-fab",2)(3,"ion-fab-button",3),o.bIt("click",function(){return n.agregartutor()}),o.nrm(4,"ion-icon",4),o.k0s()(),o.j41(5,"ion-card",5)(6,"ion-card-title")(7,"h2"),o.EFF(8,"Lista de tutores"),o.k0s()(),o.j41(9,"ion-card-content")(10,"ion-list"),o.DNE(11,V,15,6,"ion-item-sliding",6),o.k0s()()()()),2&r&&(o.R7$(11),o.Y8G("ngForOf",n.tutores))},dependencies:[d.Sq,d.bT,a.Jm,a.QW,a.b_,a.I9,a.tN,a.W9,a.Q8,a.YW,a.iq,a.uz,a.A7,a.he,a.nf,P.l]}),i})()}];let J=(()=>{var e;class i{}return(e=i).\u0275fac=function(r){return new(r||e)},e.\u0275mod=o.$C({type:e}),e.\u0275inj=o.G2t({imports:[g.iI.forChild(A),g.iI]}),i})();var O=c(3656);let W=(()=>{var e;class i{}return(e=i).\u0275fac=function(r){return new(r||e)},e.\u0275mod=o.$C({type:e}),e.\u0275inj=o.G2t({imports:[d.MD,l.YN,a.bv,J,O.h]}),i})()}}]);