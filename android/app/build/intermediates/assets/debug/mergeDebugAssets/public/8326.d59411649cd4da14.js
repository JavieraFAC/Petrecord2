"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8326],{8326:(O,g,c)=>{c.r(g),c.d(g,{NuevacuentaPageModule:()=>B});var p=c(177),a=c(4341),s=c(4742),v=c(9384),m=c(467),e=c(4438);let _=(()=>{var o;class i{constructor(r){this.popoverController=r}dismiss(){var r=this;return(0,m.A)(function*(){yield r.popoverController.dismiss()})()}close(){this.popoverController.dismiss()}ngOnInit(){}}return(o=i).\u0275fac=function(r){return new(r||o)(e.rXU(s.IE))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-terminosycondiciones"]],decls:10,vars:0,consts:[["slot","end"],[3,"click"],["name","close-circle-outline"]],template:function(r,t){1&r&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),e.bIt("click",function(){return t.close()}),e.nrm(4,"ion-icon",2),e.k0s()(),e.j41(5,"ion-title"),e.EFF(6,"T\xe9rminos y Condiciones"),e.k0s()()(),e.j41(7,"ion-content")(8,"p"),e.EFF(9,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Minima praesentium distinctio suscipit laudantium optio aspernatur reiciendis nemo natus commodi mollitia. Culpa vitae repellendus doloribus eligendi blanditiis, nam a in dolorum. Lorem ipsum dolor sit amet consectetur, adipisicing elit. Voluptatem delectus quo ipsam iste dolorum libero eligendi in voluptate, magnam nulla fugiat asperiores labore reprehenderit ea itaque rerum animi mollitia quibusdam!"),e.k0s()())},dependencies:[s.Jm,s.QW,s.W9,s.eU,s.iq,s.BC,s.ai]}),i})();var h=c(6893),F=c(4379),b=c(7988),N=c(9198);function E(o,i){1&o&&(e.j41(0,"div"),e.EFF(1,"Debes ingresar t\xfa nombre"),e.k0s())}function T(o,i){1&o&&(e.j41(0,"div"),e.EFF(1,"Ingresa un nombre v\xe1lido"),e.k0s())}function k(o,i){if(1&o&&(e.j41(0,"div",22),e.DNE(1,E,2,0,"div",7)(2,T,2,0,"div",7),e.k0s()),2&o){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==n.form.controls.nombre.errors?null:n.form.controls.nombre.errors.required),e.R7$(),e.Y8G("ngIf",null==n.form.controls.nombre.errors?null:n.form.controls.nombre.errors.minlenght)}}function R(o,i){1&o&&(e.j41(0,"div"),e.EFF(1,"Debes ingresar t\xfas apellidos"),e.k0s())}function y(o,i){1&o&&(e.j41(0,"div"),e.EFF(1,"Ingresa apellidos v\xe1lidos"),e.k0s())}function j(o,i){if(1&o&&(e.j41(0,"div",22),e.DNE(1,R,2,0,"div",7)(2,y,2,0,"div",7),e.k0s()),2&o){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==n.form.controls.apellidos.errors?null:n.form.controls.apellidos.errors.required),e.R7$(),e.Y8G("ngIf",null==n.form.controls.apellidos.errors?null:n.form.controls.apellidos.errors.minlenght)}}function G(o,i){1&o&&(e.j41(0,"div"),e.EFF(1,"RUT inv\xe1lido. Verifica el formato y los d\xedgitos."),e.k0s())}function I(o,i){if(1&o&&(e.j41(0,"div",22),e.DNE(1,G,2,0,"div",7),e.k0s()),2&o){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==n.form.controls.run.errors?null:n.form.controls.run.errors.invalidRut)}}function P(o,i){1&o&&(e.j41(0,"div"),e.EFF(1,"Debes ingresar correo electr\xf3nico"),e.k0s())}function x(o,i){1&o&&(e.j41(0,"div"),e.EFF(1,"Ingresa un correo v\xe1lido"),e.k0s())}function C(o,i){if(1&o&&(e.j41(0,"div",22),e.DNE(1,P,2,0,"div",7)(2,x,2,0,"div",7),e.k0s()),2&o){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==n.form.controls.email.errors?null:n.form.controls.email.errors.required),e.R7$(),e.Y8G("ngIf",null==n.form.controls.email.errors?null:n.form.controls.email.errors.email)}}function $(o,i){1&o&&(e.j41(0,"div"),e.EFF(1,"El tel\xe9fono es requerido."),e.k0s())}function M(o,i){1&o&&(e.j41(0,"div"),e.EFF(1,"El tel\xe9fono debe contener solo n\xfameros."),e.k0s())}function Y(o,i){if(1&o&&(e.j41(0,"div",22),e.DNE(1,$,2,0,"div",7)(2,M,2,0,"div",7),e.k0s()),2&o){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==n.form.controls.telefono.errors?null:n.form.controls.telefono.errors.required),e.R7$(),e.Y8G("ngIf",null==n.form.controls.telefono.errors?null:n.form.controls.telefono.errors.pattern)}}function w(o,i){1&o&&(e.j41(0,"div"),e.EFF(1,"La contrase\xf1a es obligatoria"),e.k0s())}function D(o,i){if(1&o&&(e.j41(0,"div",22),e.DNE(1,w,2,0,"div",7),e.k0s()),2&o){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==n.form.controls.password.errors?null:n.form.controls.password.errors.required)}}function U(o,i){1&o&&(e.j41(0,"div"),e.EFF(1,"Debes confirmar la contrase\xf1a"),e.k0s())}function V(o,i){1&o&&(e.j41(0,"div"),e.EFF(1,"Las contrase\xf1as no coinciden"),e.k0s())}function X(o,i){if(1&o&&(e.j41(0,"div",22),e.DNE(1,U,2,0,"div",7)(2,V,2,0,"div",7),e.k0s()),2&o){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==n.form.controls.confpassword.errors?null:n.form.controls.confpassword.errors.required),e.R7$(),e.Y8G("ngIf",n.form.hasError("mismatch"))}}function A(o,i){if(1&o){const n=e.RV6();e.qex(0),e.j41(1,"ion-card",3)(2,"ion-card-header")(3,"h2"),e.EFF(4,"Datos personales"),e.k0s()(),e.j41(5,"form",8),e.bIt("ngSubmit",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.submit())})("keypress.enter",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.submit())}),e.nrm(6,"app-formulario",9),e.DNE(7,k,3,2,"div",10),e.nrm(8,"app-formulario",11),e.DNE(9,j,3,2,"div",10),e.nrm(10,"app-formulario",12),e.DNE(11,I,2,1,"div",10),e.nrm(12,"app-formulario",13),e.DNE(13,C,3,2,"div",10),e.nrm(14,"app-formulario",14),e.DNE(15,Y,3,2,"div",10),e.nrm(16,"app-formulario",15),e.DNE(17,D,2,1,"div",10),e.nrm(18,"app-formulario",16),e.DNE(19,X,3,2,"div",10),e.j41(20,"ion-item",17),e.nrm(21,"ion-checkbox",18),e.j41(22,"ion-label",19),e.EFF(23," Estoy de acuerdo con "),e.j41(24,"a",20),e.bIt("click",function(t){e.eBV(n);const l=e.XpG();return e.Njj(l.showTermsPopover(t))}),e.EFF(25,"t\xe9rminos y condiciones"),e.k0s()()(),e.j41(26,"ion-button",21),e.EFF(27," Continuar "),e.k0s(),e.j41(28,"pre"),e.EFF(29),e.nI1(30,"json"),e.k0s()()(),e.bVm()}if(2&o){const n=e.XpG();e.R7$(5),e.Y8G("formGroup",n.form),e.R7$(),e.Y8G("control",n.form.controls.nombre),e.R7$(),e.Y8G("ngIf",n.form.controls.nombre.errors&&n.form.controls.nombre.touched),e.R7$(),e.Y8G("control",n.form.controls.apellidos),e.R7$(),e.Y8G("ngIf",n.form.controls.apellidos.errors&&n.form.controls.apellidos.touched),e.R7$(),e.Y8G("control",n.form.controls.run),e.R7$(),e.Y8G("ngIf",n.form.controls.run.errors&&n.form.controls.run.touched),e.R7$(),e.Y8G("control",n.form.controls.email),e.R7$(),e.Y8G("ngIf",n.form.controls.email.errors&&n.form.controls.email.touched),e.R7$(),e.Y8G("control",n.form.controls.telefono),e.R7$(),e.Y8G("ngIf",n.form.controls.telefono.errors&&n.form.controls.telefono.touched),e.R7$(),e.Y8G("control",n.form.controls.password),e.R7$(),e.Y8G("ngIf",n.form.controls.password.errors&&n.form.controls.password.touched),e.R7$(),e.Y8G("control",n.form.controls.confpassword),e.R7$(),e.Y8G("ngIf",n.form.controls.confpassword.errors&&n.form.controls.confpassword.touched),e.R7$(7),e.Y8G("disabled",n.form.invalid||!n.form.controls.aceptaTerminos.value),e.R7$(3),e.JRh(e.bMT(30,17,n.form.value))}}function S(o,i){1&o&&(e.qex(0),e.j41(1,"ion-card",3)(2,"ion-item")(3,"ion-label",23),e.EFF(4,"Ingrese c\xf3digo de invitaci\xf3n:"),e.k0s(),e.nrm(5,"ion-input",24),e.k0s(),e.j41(6,"ion-button",25),e.EFF(7," Continuar "),e.k0s()(),e.bVm())}const J=[{path:"",component:(()=>{var o;class i{constructor(r,t,l){this.router=r,this.toastController=t,this.popoverController=l,this.form=new a.gE({uid:new a.MJ(""),nombre:new a.MJ("",[a.k0.required,a.k0.minLength(3)]),apellidos:new a.MJ("",[a.k0.required,a.k0.minLength(5)]),run:new a.MJ("",[a.k0.required]),telefono:new a.MJ("",[a.k0.required]),email:new a.MJ("",[a.k0.required,a.k0.email]),password:new a.MJ("",[a.k0.required]),confpassword:new a.MJ("",[a.k0.required]),aceptaTerminos:new a.MJ(!1,a.k0.requiredTrue)},{validators:this.passwordsMatch}),this.firebaseS=(0,e.WQX)(h.f),this.cargandoS=(0,e.WQX)(F.X),this.tipoCuenta="",this.Vrun="",this.regiones=["Arica y Parinacota","Tarapac\xe1","Antofagasta","Atacama","Coquimbo","Valpara\xedso","Metropolitana de Santiago","O\u2019Higgins","Maule","\xd1uble","Biob\xedo","La Araucan\xeda","Los R\xedos","Los Lagos","Ays\xe9n","Magallanes y Ant\xe1rtica"]}ngOnInit(){}submit(){var r=this;return(0,m.A)(function*(){if(r.validarRUN()&&r.form.valid){const t=yield r.cargandoS.loading();yield t.present(),r.firebaseS.signUp(r.form.value).then(function(){var l=(0,m.A)(function*(u){const d=u.user.uid;r.form.controls.uid.setValue(d),r.setUserInfo(d)});return function(u){return l.apply(this,arguments)}}()).catch(l=>{r.cargandoS.presentToast({message:"Por favor, completa todos los datos",duration:2e3,color:"danger",position:"middle"})}).finally(()=>t.dismiss())}})()}setUserInfo(r){var t=this;return(0,m.A)(function*(){if(t.form.valid){const l=yield t.cargandoS.loading();yield l.present();let u=`users/${r}`;delete t.form.value.password,t.firebaseS.setDocument(u,t.form.value).then(function(){var d=(0,m.A)(function*(f){t.cargandoS.saveInLocalStorage("user",t.form.value),t.cargandoS.routerLink("/perfil"),t.form.reset()});return function(f){return d.apply(this,arguments)}}()).catch(d=>{t.cargandoS.presentToast({message:d.message,duration:2e3,color:"primary",position:"middle"})}).finally(()=>{l.dismiss()})}})()}validarRUN(){const r=this.form.controls.run.value;if(!r)return this.mostrarToast("RUN inv\xe1lido: no puede estar vac\xedo.","danger"),!1;const t=r.replace(/\./g,"").replace("-","").toUpperCase(),l=t.slice(0,-1),u=t.slice(-1);return l.length<7||!/^\d+$/.test(l)?(this.mostrarToast("RUN inv\xe1lido: debes escribirlo sin puntos, con gui\xf3n y d\xedgito verificador.","danger"),!1):u===this.calcularDigitoVerificador(l)||(this.mostrarToast("RUN inv\xe1lido","danger"),!1)}calcularDigitoVerificador(r){let t=0,l=2;for(let f=r.length-1;f>=0;f--)t+=parseInt(r[f],10)*l,l=l<7?l+1:2;const d=11-t%11;return 11===d?"0":10===d?"K":d.toString()}passwordsMatch(r){return r.get("password").value===r.get("confpassword").value?null:{mismatch:!0}}showTermsPopover(r){var t=this;return(0,m.A)(function*(){yield(yield t.popoverController.create({component:_,event:r,translucent:!0,cssClass:"full-screen-popover"})).present()})()}mostrarToast(r,t="danger"){var l=this;return(0,m.A)(function*(){(yield l.toastController.create({message:r,position:"middle",duration:3e3,color:t})).present()})()}}return(o=i).\u0275fac=function(r){return new(r||o)(e.rXU(v.Ix),e.rXU(s.K_),e.rXU(s.IE))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-nuevacuenta"]],decls:25,vars:4,consts:[["backButton","/login","title","Nueva cuenta"],[1,"fondo"],[2,"text-align","center"],[1,"ion-card"],[3,"ngModelChange","ngModel"],["value","Veterinario"],["value","Tutor"],[4,"ngIf"],[3,"ngSubmit","keypress.enter","formGroup"],["autocomplete","nombre","type","text","label","Nombre",3,"control"],["class","validators",4,"ngIf"],["autocomplete","apellidos","type","text","label","Apellidos",3,"control"],["autocomplete","run","type","text","label","RUN",3,"control"],["autocomplete","email","type","email","label","Correo electr\xf3nico",3,"control"],["autocomplete","tel","type","tel","label","Tel\xe9fono",3,"control"],["type","password","label","Contrase\xf1a",3,"control"],["type","password","label","Confirmar Contrase\xf1a",3,"control"],["lines","none",1,"terminos-condiciones"],["slot","start","formControlName","aceptaTerminos","aria-labelledby","checkbox-label","aria-required","true"],["id","checkbox-label"],[3,"click"],["type","submit","expand","block","shape","round",2,"padding","20px",3,"disabled"],[1,"validators"],["position","stacked"],["type","text","placeholder","**********","required",""],["expand","block","shape","round",2,"padding","20px"]],template:function(r,t){1&r&&(e.nrm(0,"app-header",0),e.j41(1,"ion-content",1)(2,"p",2),e.EFF(3," Bienvenido! "),e.nrm(4,"br"),e.EFF(5,"Comencemos a crear tu cuenta en PetRecord"),e.k0s(),e.j41(6,"ion-card",3)(7,"ion-card-header")(8,"h2"),e.EFF(9,"Tipo de cuenta"),e.k0s()(),e.j41(10,"ion-card-content")(11,"ion-radio-group",4),e.mxI("ngModelChange",function(u){return e.DH7(t.tipoCuenta,u)||(t.tipoCuenta=u),u}),e.j41(12,"ion-item")(13,"ion-radio",5),e.EFF(14,"Veterinario"),e.k0s()(),e.j41(15,"ion-item")(16,"ion-radio",6),e.EFF(17,"Tutor"),e.k0s()(),e.j41(18,"ion-item")(19,"ion-label"),e.EFF(20,"Perfil seleccionado:"),e.k0s(),e.j41(21,"ion-text"),e.EFF(22),e.k0s()()()()(),e.DNE(23,A,31,19,"ng-container",7)(24,S,8,0,"ng-container",7),e.k0s()),2&r&&(e.R7$(11),e.R50("ngModel",t.tipoCuenta),e.R7$(11),e.JRh(t.tipoCuenta),e.R7$(),e.Y8G("ngIf","Veterinario"===t.tipoCuenta),e.R7$(),e.Y8G("ngIf","Tutor"===t.tipoCuenta))},dependencies:[p.bT,a.qT,a.BC,a.cb,a.vS,s.Jm,s.b_,s.I9,s.ME,s.eY,s.W9,s.$w,s.uz,s.he,s.KO,s.f0,s.IO,s.hB,s.Je,s.Gw,b.l,N.c,a.j4,a.JD,p.TG]}),i})()}];let q=(()=>{var o;class i{}return(o=i).\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[v.iI.forChild(J),v.iI]}),i})();var L=c(3656);let B=(()=>{var o;class i{}return(o=i).\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[p.MD,a.YN,s.bv,q,L.h]}),i})()}}]);